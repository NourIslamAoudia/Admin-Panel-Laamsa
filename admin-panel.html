<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
    />
    <meta
      name="description"
      content="Panel d'administration pour la gestion des commandes de cartes de visite"
    />
    <meta name="theme-color" content="#ffd700" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <title>Admin Panel - Cartes de Visite</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Page de Connexion -->
    <div id="loginPage" class="login-container">
      <div class="login-card">
        <div class="login-header">
          <i class="fas fa-user-shield"></i>
          <h1>Administration</h1>
          <p>Connexion au panel administrateur</p>
        </div>
        <form id="loginForm" class="login-form">
          <div class="form-group">
            <label for="username">
              <i class="fas fa-user"></i>
              Nom d'utilisateur
            </label>
            <input
              type="text"
              id="username"
              name="username"
              placeholder="Entrez votre nom d'utilisateur"
              required
              autocomplete="username"
            />
          </div>
          <div class="form-group">
            <label for="password">
              <i class="fas fa-lock"></i>
              Mot de passe
            </label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="Entrez votre mot de passe"
              required
              autocomplete="current-password"
            />
          </div>
          <div id="loginError" class="error-message"></div>
          <button type="submit" class="btn-primary">
            <i class="fas fa-sign-in-alt"></i>
            Se connecter
          </button>
        </form>
      </div>
    </div>

    <!-- Page Dashboard -->
    <div id="dashboardPage" class="dashboard-container" style="display: none">
      <!-- Mobile Overlay -->
      <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <i class="fas fa-address-card"></i>
          <h2>Admin Panel</h2>
        </div>
        <nav class="sidebar-nav">
          <a href="#" class="nav-item active">
            <i class="fas fa-box"></i>
            <span>Commandes</span>
          </a>
          <a href="#" class="nav-item" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i>
            <span>Déconnexion</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <p>Connecté en tant que</p>
          <strong id="currentUser">Admin</strong>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Header -->
        <header class="dashboard-header">
          <div class="header-left">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
              <i class="fas fa-bars"></i>
            </button>
            <h1>Gestion des Commandes</h1>
          </div>
          <div class="header-right">
            <div class="user-info">
              <i class="fas fa-user-circle"></i>
              <span id="headerUser">Admin</span>
            </div>
          </div>
        </header>

        <!-- Stats Cards -->
        <section class="stats-section">
          <div class="stat-card">
            <div class="stat-icon yellow">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-info">
              <h3 id="statEnAttente">0</h3>
              <p>En Attente</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
              <h3 id="statConfirmee">0</h3>
              <p>Confirmées</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon blue">
              <i class="fas fa-shipping-fast"></i>
            </div>
            <div class="stat-info">
              <h3 id="statLivree">0</h3>
              <p>Livrées</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon red">
              <i class="fas fa-times-circle"></i>
            </div>
            <div class="stat-info">
              <h3 id="statAnnulee">0</h3>
              <p>Annulées</p>
            </div>
          </div>
        </section>

        <!-- Filters and Search -->
        <section class="filters-section">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              id="searchInput"
              placeholder="Rechercher par nom, téléphone ou commune..."
            />
          </div>
          <div class="filter-buttons">
            <button class="filter-btn active" data-status="all">
              <i class="fas fa-list"></i>
              Tous
            </button>
            <button class="filter-btn" data-status="EN_ATTENTE">
              <i class="fas fa-clock"></i>
              En Attente
            </button>
            <button class="filter-btn" data-status="CONFIRMEE">
              <i class="fas fa-check"></i>
              Confirmées
            </button>
            <button class="filter-btn" data-status="LIVREE">
              <i class="fas fa-truck"></i>
              Livrées
            </button>
            <button class="filter-btn" data-status="ANNULEE">
              <i class="fas fa-ban"></i>
              Annulées
            </button>
          </div>
          <button class="btn-refresh" id="refreshBtn">
            <i class="fas fa-sync-alt"></i>
            Actualiser
          </button>
        </section>

        <!-- Orders Table -->
        <section class="orders-section">
          <div class="orders-header">
            <h2>Liste des Commandes</h2>
            <span class="orders-count" id="ordersCount">0 commandes</span>
          </div>
          <div class="table-container">
            <div id="loadingSpinner" class="loading-spinner">
              <i class="fas fa-spinner fa-spin"></i>
              <p>Chargement des commandes...</p>
            </div>
            <table id="ordersTable" class="orders-table" style="display: none">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Client</th>
                  <th>Téléphone</th>
                  <th>Wilaya</th>
                  <th>Commune</th>
                  <th>Cartes</th>
                  <th>Prix</th>
                  <th>Statut</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="ordersTableBody">
                <!-- Rows will be inserted here -->
              </tbody>
            </table>
            <div id="noOrdersMessage" class="no-orders" style="display: none">
              <i class="fas fa-inbox"></i>
              <p>Aucune commande trouvée</p>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Modal Détails -->
    <div id="detailsModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><i class="fas fa-info-circle"></i> Détails de la Commande</h2>
          <button class="modal-close" id="closeDetailsModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body" id="detailsModalBody">
          <!-- Content will be inserted here -->
        </div>
      </div>
    </div>

    <!-- Modal Edit Status -->
    <div id="editModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><i class="fas fa-edit"></i> Modifier le Statut</h2>
          <button class="modal-close" id="closeEditModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <form id="editStatusForm">
            <input type="hidden" id="editOrderId" />
            <div class="form-group">
              <label for="editStatus">Nouveau Statut</label>
              <select id="editStatus" required>
                <option value="EN_ATTENTE">En Attente</option>
                <option value="CONFIRMEE">Confirmée</option>
                <option value="LIVREE">Livrée</option>
                <option value="ANNULEE">Annulée</option>
              </select>
            </div>
            <div class="modal-actions">
              <button type="button" class="btn-secondary" id="cancelEditBtn">
                Annuler
              </button>
              <button type="submit" class="btn-primary">
                <i class="fas fa-save"></i>
                Enregistrer
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Delete Confirmation -->
    <div id="deleteModal" class="modal">
      <div class="modal-content delete-modal">
        <div class="modal-header">
          <h2>
            <i class="fas fa-exclamation-triangle"></i> Confirmer la Suppression
          </h2>
          <button class="modal-close" id="closeDeleteModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <p>Êtes-vous sûr de vouloir supprimer cette commande ?</p>
          <p class="warning-text">Cette action est irréversible.</p>
          <input type="hidden" id="deleteOrderId" />
          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="cancelDeleteBtn">
              Annuler
            </button>
            <button type="button" class="btn-danger" id="confirmDeleteBtn">
              <i class="fas fa-trash"></i>
              Supprimer
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
      <i class="fas fa-check-circle"></i>
      <span id="toastMessage">Message</span>
    </div>

    <script src="script.js"></script>
  </body>
</html>
